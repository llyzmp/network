# 跨域
跨域访问资源
哪些东西属于资源?
js文件,css文件,png,jpg等资源,是允许被跨域请求的,所有src属性的资源都可以被跨域请求的,href资源大部分都可以被跨域请求的


哪些资源算跨域请求的资源?
1. 后端接口的数据
2. 其他域的cookie
3. 其他域的缓存


什么是其他域? 怎么样算跨域?
页面本身: 有协议(http/https),域名,端口
要请求的数据: https:// www.baidu.com:80
协议,域名,端口号三个只要有任何一个不一样都是跨域

跨域的行为是发生在哪里?
答案: 
1. 即使跨域了(协议,域名,端口号有不一样),请求也可以发出
2. 服务器端也可以接收的
3. 服务器端是也可以正常处理的
4. 服务器端也是可以正常返回数据
5. 浏览器也能接收到这些数据
6. 接收到之后,发现当前页面的域和请求的域不同,所以判定为跨域
7. 我们的代码在这等结果呢,但是因为浏览器判定跨域了,不会吧结果传递给我们代码

虽然跨域了,但是我们依然需要这个数据,怎么办?
解决跨域问题:
1. 后端(别人家的后端)是否配合我们进行跨域
pan.baidu.com -> zhidao.baidu.com
  1. jsonp(正常的情况,返回的数据都是JSON格式,jsonp是一种特殊的格式)
  2. 后端设置Access-Control-Allow-Origin属性以支持跨域

1. 后端不配合我们进行跨域
  iframe(缺点:只能显示,不能控制)
  通过后端代理(自己的后端)

jsonp格式哪里特殊?
发送请求的时候,会带上一个参数callback,返回的结果不是json,callback的名+(+json+)
jsonp跨域,只能使用get方法,如果我们设置的是post方法,jquery会自动转换为get方法,
问: 是不是在jsonp里面只能使用get方法?是不是设置的post方法都会转为get方法?
答: jquery会先判断是否同源,如果同源,那么设置get就是get,设置的post就是post,如果不是同源,无论设置什么,都改为get